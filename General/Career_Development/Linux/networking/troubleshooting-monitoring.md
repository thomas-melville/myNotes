# troubleshooting and monitoring

## troubleshooting

### client side

#### ping

ping the ip address/hostname to see if there is connectivity.
  adapter/gateway address/DNS server/ DNS name
pings uses ICMP, but normal traffic uses TCP.

DNS issues, can you ping the IP but not the hostname

#### traceroute

or mtr

will show connectivity path to the destination

#### nmap

scans server to see if required ports are available to you.
Can detect open or listening network ports remotely.

#### telnet

telnet to a host on a port and execute basic HTTP requests

#### openssl s_client

similar to telnet but over TLS/SSL protocols

#### arp

to test link layer connectivity

#### tcpdump

around for a long time!
text-based, small and efficient.
generates pcap files.

#### wireshark

uses a GUI to capture and analyze packets in real time.
can analyze pcap files generated by tcpdump

### server side

common problems:

broken DNS
overzealous firewall rules
incorrect network settings
daemon not listening on right interface/port.

#### netstat

list which daemons are listening on which port.

#### ss

socket statistics utility.
may be a replacement for netstat, although it is missing some socket types.

#### firewall

ensure firewall configuration is letting traffic in and out.

/etc/hosts.allow
/etc/hosts.deny

#### /proc filesystem

has settings that affect the network stack

files in /proc/sys/net subfolders

#### netcat

TCP/UDP sender and listener.
Quickly create a connection between two systems.
bi-directional, so text typed in one will appear in the other.

netcat -l <port> to listen
netcat <ip> <port> to talk to listener

## monitoring

### iptraf

real time network traffic analyzer.
Recognizes lots of protocols:
* IP
* TCP/UDP
* ICMP
* ...

### snort

network intrusion detection system.
Can help pinpoint unwanted traffic in a network.

### tripwire

host-based intrusion detection system.
Keeps a DB of your system state and alert if this changes without your knowledge

### ntop

app and web app for monitoring network usage.
can pinpoint bandwidth use, display network stats.
